<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.kh.team2.dao.GroupDAO">
 	<select id="getGroupListById" resultType="GroupVO">
		SELECT go_num, go_name, go_time, go_update, COUNT(gome_me_id) as go_member_count 
			FROM `group`
				JOIN group_member ON go_num = gome_go_num
			WHERE go_num in (
				SELECT gome_go_num FROM group_member WHERE gome_me_id = #{id}
            ) 
             GROUP BY gome_go_num;
	</select>
	
	<select id="getGroupByGoNum" resultType="GroupVO">
		SELECT * FROM `group` WHERE go_num = #{num}
	</select>
	
	<select id="isGroupMember" resultType="Object">
		SELECT * FROM group_member WHERE gome_go_num = #{num} AND gome_me_id = #{id}
	</select>
 	
 	<select id="selectRecruit" resultType="RecruitVO">
 		select * from recruit where recu_num = #{num}
 	</select>
 	
 	<select id="selectGroupKing" resultType="MemberVO">
 		select * from member where me_id = 
 		(select gome_me_id from group_member where gome_go_num = #{recu_go_num} and gome_type = 0)
 	</select>
 	
 	<select id="selectCategoryList" resultType="TotalCategoryVO">
 		select
 			total_category.*,
 			progCt_name as toCt_progCt_name
 		from
 			total_category
 				join
 			programming_category on progCt_num = toCt_progCt_num
 		where
 			toCt_table_name = #{table} and toCt_table_pk = #{num}
 	</select>
 	
 	<select id="selectLanguageList" resultType="TotalLanguageVO">
 		select
 			total_language.*,
 			lang_name as toLg_lang_name
 		from
 			total_language
 				join
 			programming_language on lang_num = toLg_lang_num
 		where
 			toLg_table_name = #{table} and toLg_table_pk = #{num}
 	</select>
 	
</mapper>